{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import{API_ENDPOINTS}from'./config';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function CatDetailsPage(){const{id}=useParams();const navigate=useNavigate();const[cat,setCat]=useState(null);const[records,setRecords]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');useEffect(()=>{const fetchCatDetails=async()=>{try{const token=localStorage.getItem('token');if(!token){navigate('/login');return;}// Fetch cat information\nconst catResponse=await fetch(`${API_ENDPOINTS.GET_CAT}/${id}`,{headers:{'Authorization':`Bearer ${token}`}});if(!catResponse.ok){if(catResponse.status===401){localStorage.removeItem('token');navigate('/login');return;}throw new Error('Failed to fetch cat information');}const catData=await catResponse.json();setCat(catData);// Fetch health records\nconst recordsResponse=await fetch(`${API_ENDPOINTS.GET_CAT_RECORDS}/${id}`,{headers:{'Authorization':`Bearer ${token}`}});if(!recordsResponse.ok){throw new Error('Failed to fetch health records');}const recordsData=await recordsResponse.json();setRecords(recordsData);}catch(err){setError(err.message);}finally{setLoading(false);}};fetchCatDetails();},[id,navigate]);const handleEditCat=()=>{navigate(`/cats/${id}/edit`);};const handleAddRecord=()=>{navigate(`/cats/${id}/records/add`);};const handleEditRecord=recordId=>{navigate(`/records/${recordId}/edit`);};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center align-items-center\",style:{height:'50vh'},children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border text-primary\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})})});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",role:\"alert\",children:error});}if(!cat){return/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-warning\",role:\"alert\",children:\"Cat information not found\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"container mt-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center mb-3\",children:[/*#__PURE__*/_jsx(\"h2\",{children:cat.name}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-primary\",onClick:handleEditCat,children:\"Edit Information\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Breed:\"}),\" \",cat.breed]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Age:\"}),\" \",cat.age,\" years\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Weight:\"}),\" \",cat.weight,\"kg\"]}),cat.description&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Description:\"}),\" \",cat.description]})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center mb-3\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Health Records\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:handleAddRecord,children:\"Add Record\"})]}),records.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"No health records yet\"}):/*#__PURE__*/_jsx(\"div\",{className:\"list-group\",children:records.map(record=>/*#__PURE__*/_jsx(\"div\",{className:\"list-group-item\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mb-1\",children:record.type}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-1\",children:/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:new Date(record.date).toLocaleDateString()})}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-1\",children:record.description}),record.notes&&/*#__PURE__*/_jsx(\"p\",{className:\"mb-1\",children:/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[\"Notes: \",record.notes]})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-outline-secondary\",onClick:()=>handleEditRecord(record.id),children:\"Edit\"})]})},record.id))})]})})})]})});}export default CatDetailsPage;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","API_ENDPOINTS","jsx","_jsx","jsxs","_jsxs","CatDetailsPage","id","navigate","cat","setCat","records","setRecords","loading","setLoading","error","setError","fetchCatDetails","token","localStorage","getItem","catResponse","fetch","GET_CAT","headers","ok","status","removeItem","Error","catData","json","recordsResponse","GET_CAT_RECORDS","recordsData","err","message","handleEditCat","handleAddRecord","handleEditRecord","recordId","className","style","height","children","role","name","onClick","breed","age","weight","description","length","map","record","type","Date","date","toLocaleDateString","notes"],"sources":["/Users/qianli/cathealthtracker-full/cathealty/src/CatDetailsPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { API_ENDPOINTS } from './config';\n\nfunction CatDetailsPage() {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const [cat, setCat] = useState(null);\n  const [records, setRecords] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    const fetchCatDetails = async () => {\n      try {\n        const token = localStorage.getItem('token');\n        if (!token) {\n          navigate('/login');\n          return;\n        }\n\n        // Fetch cat information\n        const catResponse = await fetch(`${API_ENDPOINTS.GET_CAT}/${id}`, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n\n        if (!catResponse.ok) {\n          if (catResponse.status === 401) {\n            localStorage.removeItem('token');\n            navigate('/login');\n            return;\n          }\n          throw new Error('Failed to fetch cat information');\n        }\n\n        const catData = await catResponse.json();\n        setCat(catData);\n\n        // Fetch health records\n        const recordsResponse = await fetch(`${API_ENDPOINTS.GET_CAT_RECORDS}/${id}`, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n\n        if (!recordsResponse.ok) {\n          throw new Error('Failed to fetch health records');\n        }\n\n        const recordsData = await recordsResponse.json();\n        setRecords(recordsData);\n      } catch (err) {\n        setError(err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchCatDetails();\n  }, [id, navigate]);\n\n  const handleEditCat = () => {\n    navigate(`/cats/${id}/edit`);\n  };\n\n  const handleAddRecord = () => {\n    navigate(`/cats/${id}/records/add`);\n  };\n\n  const handleEditRecord = (recordId) => {\n    navigate(`/records/${recordId}/edit`);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"d-flex justify-content-center align-items-center\" style={{ height: '50vh' }}>\n        <div className=\"spinner-border text-primary\" role=\"status\">\n          <span className=\"visually-hidden\">Loading...</span>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"alert alert-danger\" role=\"alert\">\n        {error}\n      </div>\n    );\n  }\n\n  if (!cat) {\n    return (\n      <div className=\"alert alert-warning\" role=\"alert\">\n        Cat information not found\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mt-4\">\n      <div className=\"row\">\n        <div className=\"col-md-6\">\n          <div className=\"card mb-4\">\n            <div className=\"card-body\">\n              <div className=\"d-flex justify-content-between align-items-center mb-3\">\n                <h2>{cat.name}</h2>\n                <button className=\"btn btn-outline-primary\" onClick={handleEditCat}>\n                  Edit Information\n                </button>\n              </div>\n              <div className=\"mb-3\">\n                <strong>Breed:</strong> {cat.breed}\n              </div>\n              <div className=\"mb-3\">\n                <strong>Age:</strong> {cat.age} years\n              </div>\n              <div className=\"mb-3\">\n                <strong>Weight:</strong> {cat.weight}kg\n              </div>\n              {cat.description && (\n                <div className=\"mb-3\">\n                  <strong>Description:</strong> {cat.description}\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"col-md-6\">\n          <div className=\"card\">\n            <div className=\"card-body\">\n              <div className=\"d-flex justify-content-between align-items-center mb-3\">\n                <h3>Health Records</h3>\n                <button className=\"btn btn-primary\" onClick={handleAddRecord}>\n                  Add Record\n                </button>\n              </div>\n\n              {records.length === 0 ? (\n                <p className=\"text-muted\">No health records yet</p>\n              ) : (\n                <div className=\"list-group\">\n                  {records.map((record) => (\n                    <div key={record.id} className=\"list-group-item\">\n                      <div className=\"d-flex justify-content-between align-items-center\">\n                        <div>\n                          <h5 className=\"mb-1\">{record.type}</h5>\n                          <p className=\"mb-1\">\n                            <small className=\"text-muted\">\n                              {new Date(record.date).toLocaleDateString()}\n                            </small>\n                          </p>\n                          <p className=\"mb-1\">{record.description}</p>\n                          {record.notes && (\n                            <p className=\"mb-1\">\n                              <small className=\"text-muted\">Notes: {record.notes}</small>\n                            </p>\n                          )}\n                        </div>\n                        <button\n                          className=\"btn btn-sm btn-outline-secondary\"\n                          onClick={() => handleEditRecord(record.id)}\n                        >\n                          Edit\n                        </button>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default CatDetailsPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}