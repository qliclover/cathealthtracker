{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';import{API_ENDPOINTS}from'./config';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AddCatPage(){const navigate=useNavigate();const[name,setName]=useState('');const[breed,setBreed]=useState('');const[age,setAge]=useState('');const[weight,setWeight]=useState('');const[error,setError]=useState('');const[loading,setLoading]=useState(false);const handleSubmit=async e=>{e.preventDefault();setError('');setLoading(true);try{const token=localStorage.getItem('token');if(!token){navigate('/login');return;}const response=await fetch(API_ENDPOINTS.CREATE_CAT,{method:'POST',headers:{'Content-Type':'application/json','Authorization':`Bearer ${token}`},body:JSON.stringify({name,breed,age:parseInt(age),weight:parseFloat(weight)})});if(!response.ok){if(response.status===401){localStorage.removeItem('token');navigate('/login');return;}throw new Error('添加猫咪失败');}// 添加成功后跳转到猫咪列表页面\nnavigate('/cats');}catch(err){setError(err.message);}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"container mt-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card shadow\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"card-title text-center mb-4\",children:\"\\u6DFB\\u52A0\\u732B\\u54AA\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",role:\"alert\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",className:\"form-label\",children:\"\\u540D\\u5B57\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"name\",value:name,onChange:e=>setName(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"breed\",className:\"form-label\",children:\"\\u54C1\\u79CD\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"breed\",value:breed,onChange:e=>setBreed(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"age\",className:\"form-label\",children:\"\\u5E74\\u9F84\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",id:\"age\",value:age,onChange:e=>setAge(e.target.value),min:\"0\",step:\"0.1\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"weight\",className:\"form-label\",children:\"\\u4F53\\u91CD (kg)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",id:\"weight\",value:weight,onChange:e=>setWeight(e.target.value),min:\"0\",step:\"0.1\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-grid gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",disabled:loading,children:loading?'添加中...':'添加猫咪'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-outline-secondary\",onClick:()=>navigate('/cats'),children:\"\\u53D6\\u6D88\"})]})]})]})})})})});}export default AddCatPage;","map":{"version":3,"names":["React","useState","useNavigate","API_ENDPOINTS","jsx","_jsx","jsxs","_jsxs","AddCatPage","navigate","name","setName","breed","setBreed","age","setAge","weight","setWeight","error","setError","loading","setLoading","handleSubmit","e","preventDefault","token","localStorage","getItem","response","fetch","CREATE_CAT","method","headers","body","JSON","stringify","parseInt","parseFloat","ok","status","removeItem","Error","err","message","className","children","role","onSubmit","htmlFor","type","id","value","onChange","target","required","min","step","disabled","onClick"],"sources":["/Users/qianli/cathealthsystem/cathealty/client/src/AddCatPage.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { API_ENDPOINTS } from './config';\n\nfunction AddCatPage() {\n  const navigate = useNavigate();\n  const [name, setName] = useState('');\n  const [breed, setBreed] = useState('');\n  const [age, setAge] = useState('');\n  const [weight, setWeight] = useState('');\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    setLoading(true);\n\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        navigate('/login');\n        return;\n      }\n\n      const response = await fetch(API_ENDPOINTS.CREATE_CAT, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          name,\n          breed,\n          age: parseInt(age),\n          weight: parseFloat(weight)\n        })\n      });\n\n      if (!response.ok) {\n        if (response.status === 401) {\n          localStorage.removeItem('token');\n          navigate('/login');\n          return;\n        }\n        throw new Error('添加猫咪失败');\n      }\n\n      // 添加成功后跳转到猫咪列表页面\n      navigate('/cats');\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"container mt-4\">\n      <div className=\"row justify-content-center\">\n        <div className=\"col-md-6\">\n          <div className=\"card shadow\">\n            <div className=\"card-body\">\n              <h2 className=\"card-title text-center mb-4\">添加猫咪</h2>\n              {error && (\n                <div className=\"alert alert-danger\" role=\"alert\">\n                  {error}\n                </div>\n              )}\n              <form onSubmit={handleSubmit}>\n                <div className=\"mb-3\">\n                  <label htmlFor=\"name\" className=\"form-label\">名字</label>\n                  <input\n                    type=\"text\"\n                    className=\"form-control\"\n                    id=\"name\"\n                    value={name}\n                    onChange={(e) => setName(e.target.value)}\n                    required\n                  />\n                </div>\n                <div className=\"mb-3\">\n                  <label htmlFor=\"breed\" className=\"form-label\">品种</label>\n                  <input\n                    type=\"text\"\n                    className=\"form-control\"\n                    id=\"breed\"\n                    value={breed}\n                    onChange={(e) => setBreed(e.target.value)}\n                    required\n                  />\n                </div>\n                <div className=\"mb-3\">\n                  <label htmlFor=\"age\" className=\"form-label\">年龄</label>\n                  <input\n                    type=\"number\"\n                    className=\"form-control\"\n                    id=\"age\"\n                    value={age}\n                    onChange={(e) => setAge(e.target.value)}\n                    min=\"0\"\n                    step=\"0.1\"\n                    required\n                  />\n                </div>\n                <div className=\"mb-3\">\n                  <label htmlFor=\"weight\" className=\"form-label\">体重 (kg)</label>\n                  <input\n                    type=\"number\"\n                    className=\"form-control\"\n                    id=\"weight\"\n                    value={weight}\n                    onChange={(e) => setWeight(e.target.value)}\n                    min=\"0\"\n                    step=\"0.1\"\n                    required\n                  />\n                </div>\n                <div className=\"d-grid gap-2\">\n                  <button\n                    type=\"submit\"\n                    className=\"btn btn-primary\"\n                    disabled={loading}\n                  >\n                    {loading ? '添加中...' : '添加猫咪'}\n                  </button>\n                  <button\n                    type=\"button\"\n                    className=\"btn btn-outline-secondary\"\n                    onClick={() => navigate('/cats')}\n                  >\n                    取消\n                  </button>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default AddCatPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}